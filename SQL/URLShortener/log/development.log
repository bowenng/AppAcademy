  [1m[35m (693.9ms)[0m  [1m[35mCREATE DATABASE "URLShortener_development" ENCODING = 'unicode'[0m
  â†³ bin/rails:9
  [1m[35m (367.8ms)[0m  [1m[35mCREATE DATABASE "URLShortener_test" ENCODING = 'unicode'[0m
  â†³ bin/rails:9
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ bin/rails:9
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUsers (20190620104210)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL)[0m
  â†³ db/migrate/20190620104210_create_users.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190620104210_create_users.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620104210"]]
  â†³ bin/rails:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-06-20 10:47:06.676372"], ["updated_at", "2019-06-20 10:47:06.676372"]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "bowen-wu@hotmail.com"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddEmailIndexToUsers (20190620105604)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Create (3.4ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES ($1) RETURNING "id"[0m  [["email", "bowen-wu@hotmail.com"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateShortenedUrls (20190620110406)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateShortenedUrls (20190620110406)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "shortened_urls" ("id" bigserial primary key, "long_url" character varying NOT NULL, "short_url" character varying NOT NULL, "user_id" character varying NOT NULL)[0m
  â†³ db/migrate/20190620110406_create_shortened_urls.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_long_url" ON "shortened_urls"  ("long_url")[0m
  â†³ db/migrate/20190620110406_create_shortened_urls.rb:3
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_short_url" ON "shortened_urls"  ("short_url")[0m
  â†³ db/migrate/20190620110406_create_shortened_urls.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620110406"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Exists (2.7ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "UAnss4loyg-GCbltWqRJJQ"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "Iv0ZIf08-XGR8SZrVR4qDA"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "Iv0ZIf08-XGR8SZrVR4qDA"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "www.baidu.com"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1 LIMIT $2[0m  [["user_id", "1"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (1.1ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("long_url", "short_url", "user_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["long_url", "www.baidu.com"], ["short_url", "Iv0ZIf08-XGR8SZrVR4qDA"], ["user_id", "1"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeUserIdToBeIntegerInShortenedUrls (20190620113341)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (5.7ms)[0m  [1m[35mALTER TABLE "shortened_urls" ALTER COLUMN "user_id" TYPE integer[0m
  â†³ db/migrate/20190620113341_change_user_id_to_be_integer_in_shortened_urls.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (2.1ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeUserIdToBeIntegerInShortenedUrls (20190620113341)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "shortened_urls" ALTER COLUMN "user_id" TYPE integer[0m
  â†³ db/migrate/20190620113341_change_user_id_to_be_integer_in_shortened_urls.rb:3
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeUserIdToBeIntegerInShortenedUrls (20190620113341)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "shortened_urls" ALTER COLUMN "user_id" TYPE integer, ALTER COLUMN "user_id" SET NOT NULL[0m
  â†³ db/migrate/20190620113341_change_user_id_to_be_integer_in_shortened_urls.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeUserIdToBeIntegerInShortenedUrls (20190620113341)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to ChangeUserIdToBeIntegerInShortenedUrls (20190620113341)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "shortened_urls" ALTER COLUMN "user_id" TYPE USING user_id::integer[0m
  â†³ db/migrate/20190620113341_change_user_id_to_be_integer_in_shortened_urls.rb:3
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateShortenedUrls (20190620110406)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.2ms)[0m  [1m[35mDROP TABLE "shortened_urls"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (1.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20190620110406"]]
  â†³ bin/rails:9
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateShortenedUrls (20190620114328)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "shortened_urls" ("id" bigserial primary key, "long_url" character varying NOT NULL, "short_url" character varying NOT NULL, "user_id" integer NOT NULL)[0m
  â†³ db/migrate/20190620114328_create_shortened_urls.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_long_url" ON "shortened_urls"  ("long_url")[0m
  â†³ db/migrate/20190620114328_create_shortened_urls.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_short_url" ON "shortened_urls"  ("short_url")[0m
  â†³ db/migrate/20190620114328_create_shortened_urls.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620114328"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "dWg0Dsfp7E-6fOPAMY2oMg"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "mIr4fhMyIBmxPO53is6czA"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "mIr4fhMyIBmxPO53is6czA"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "www.baidu.com/"], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShortenedUrl Create (0.8ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("long_url", "short_url", "user_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["long_url", "www.baidu.com/"], ["short_url", "mIr4fhMyIBmxPO53is6czA"], ["user_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateVisits (20190620115224)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "visits" ("id" bigserial primary key, "visitor_id" integer NOT NULL, "url_id" integer NOT NULL)[0m
  â†³ db/migrate/20190620115224_create_visits.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_visits_on_visitor_id" ON "visits"  ("visitor_id")[0m
  â†³ db/migrate/20190620115224_create_visits.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_visits_on_url_id" ON "visits"  ("url_id")[0m
  â†³ db/migrate/20190620115224_create_visits.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620115224"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mVisit Load (3.9ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVisit Create (1.6ms)[0m  [1m[32mINSERT INTO "visits" ("visitor_id", "url_id") VALUES ($1, $2) RETURNING "id"[0m  [["visitor_id", 1], ["url_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVisit Load (0.5ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mVisit Load (0.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mVisit Load (1.1ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "shortened_urls"."id" = "visits"."url_id" WHERE "visits"."visitor_id" = $1[0m  [["visitor_id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."visitor_id" WHERE "visits"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."visitor_id" WHERE "visits"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mVisit Load (0.6ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT DISTINCT "users".* FROM "users" INNER JOIN "visits" ON "users"."id" = "visits"."visitor_id" WHERE "visits"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mVisit Load (4.3ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."url_id" = $1 AND (created_at < '2019-06-20 13:24:44.296834')[0m  [["url_id", 1]]
  [1m[36mVisit Load (2.4ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" WHERE "visits"."url_id" = $1 AND (created_at < '2019-06-20 13:24:44.296834') LIMIT $2[0m  [["url_id", 1], ["LIMIT", 11]]
  [1m[36mVisit Load (4.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits" WHERE "visits"."url_id" = $1 AND (created_at < '2019-06-20 13:25:33.188531')[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "visits"."visitor_id") FROM "visits" WHERE "visits"."url_id" = $1 AND (created_at > '2019-06-20 13:28:48.720612')[0m  [["url_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUsers (20190620104210)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE "users"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (1.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20190620104210"]]
  â†³ bin/rails:9
  [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateShortenedUrls (20190620114328)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE "shortened_urls"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (1.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20190620114328"]]
  â†³ bin/rails:9
  [1m[35m (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateVisits (20190620115224)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE "visits"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (0.8ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20190620115224"]]
  â†³ bin/rails:9
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateUsers (20190620104210)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190620104210_create_users.rb:3
  [1m[35m (3.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190620104210_create_users.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620104210"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateShortenedUrls (20190620114328)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "shortened_urls" ("id" bigserial primary key, "long_url" character varying NOT NULL, "short_url" character varying NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190620114328_create_shortened_urls.rb:3
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_long_url" ON "shortened_urls"  ("long_url")[0m
  â†³ db/migrate/20190620114328_create_shortened_urls.rb:3
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_shortened_urls_on_short_url" ON "shortened_urls"  ("short_url")[0m
  â†³ db/migrate/20190620114328_create_shortened_urls.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620114328"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
Migrating to CreateVisits (20190620115224)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "visits" ("id" bigserial primary key, "visitor_id" integer NOT NULL, "url_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190620115224_create_visits.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_visits_on_visitor_id" ON "visits"  ("visitor_id")[0m
  â†³ db/migrate/20190620115224_create_visits.rb:3
  [1m[35m (5.0ms)[0m  [1m[35mCREATE  INDEX  "index_visits_on_url_id" ON "visits"  ("url_id")[0m
  â†³ db/migrate/20190620115224_create_visits.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190620115224"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUser Exists (8.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/cli:9
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:9
  [1m[36mUser Create (18.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["email", "bowen-wu@hotmail.com"], ["created_at", "2019-06-21 02:17:53.471916"], ["updated_at", "2019-06-21 02:17:53.471916"]]
  â†³ bin/cli:9
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/cli:9
  [1m[36mUser Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/visit.rb:22
  [1m[36mVisit Load (2.9ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mShortenedUrl Load (4.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "x6sLxnOMH7eku25U82_OUQ"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:28
  [1m[36mShortenedUrl Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:28
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/shortened_url.rb:9
  [1m[36mShortenedUrl Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:9
  [1m[36mShortenedUrl Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "www.google.com"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:9
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:9
  [1m[36mShortenedUrl Create (1.0ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("long_url", "short_url", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["long_url", "www.google.com"], ["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["user_id", 1], ["created_at", "2019-06-21 02:28:10.208304"], ["updated_at", "2019-06-21 02:28:10.208304"]]
  â†³ app/models/shortened_url.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/shortened_url.rb:9
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/visit.rb:22
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mVisit Load (0.9ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mVisit Load (0.5ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'www.google.com') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'www.google.com') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'jldfks') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/visit.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/visit.rb:22
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/visit.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  â†³ app/models/visit.rb:22
  [1m[36mVisit Load (0.7ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg')[0m
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT  "shortened_urls"."id" FROM "shortened_urls" WHERE (short_url = 'XPbLxTJQ0DzXlDa3WiBTsg') ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 ORDER BY "shortened_urls"."id" ASC LIMIT $2[0m  [["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.8ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 ORDER BY "shortened_urls"."id" ASC LIMIT $2[0m  [["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 ORDER BY "shortened_urls"."id" ASC LIMIT $2[0m  [["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  â†³ app/models/visit.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[36mVisit Create (2.8ms)[0m  [1m[32mINSERT INTO "visits" ("visitor_id", "url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["visitor_id", 1], ["url_id", 1], ["created_at", "2019-06-21 02:47:14.516840"], ["updated_at", "2019-06-21 02:47:14.516840"]]
  â†³ app/models/visit.rb:22
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/visit.rb:22
  [1m[36mVisit Load (0.6ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" ORDER BY "visits"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mVisit Load (0.5ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 ORDER BY "shortened_urls"."id" ASC LIMIT $2[0m  [["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  â†³ app/models/visit.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[36mVisit Create (0.7ms)[0m  [1m[32mINSERT INTO "visits" ("visitor_id", "url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["visitor_id", 1], ["url_id", 1], ["created_at", "2019-06-21 02:50:04.478778"], ["updated_at", "2019-06-21 02:50:04.478778"]]
  â†³ app/models/visit.rb:22
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/visit.rb:22
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 ORDER BY "shortened_urls"."id" ASC LIMIT $2[0m  [["short_url", "XPbLxTJQ0DzXlDa3WiBTsg"], ["LIMIT", 1]]
  â†³ app/models/visit.rb:21
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/visit.rb:22
  [1m[36mShortenedUrl Load (0.3ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:22
  [1m[36mVisit Create (0.6ms)[0m  [1m[32mINSERT INTO "visits" ("visitor_id", "url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["visitor_id", 1], ["url_id", 1], ["created_at", "2019-06-21 02:50:30.122752"], ["updated_at", "2019-06-21 02:50:30.122752"]]
  â†³ app/models/visit.rb:22
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/visit.rb:22
  [1m[36mVisit Load (0.4ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" ORDER BY "visits"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/visit.rb:26
  [1m[36mShortenedUrl Load (0.2ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/visit.rb:26
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTagTopics (20190621025311)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (31.2ms)[0m  [1m[35mCREATE TABLE "tag_topics" ("id" bigserial primary key, "tag" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190621025311_create_tag_topics.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_tag_topics_on_tag" ON "tag_topics"  ("tag")[0m
  â†³ db/migrate/20190621025311_create_tag_topics.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190621025311"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTaggings (20190621030005)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "tag_id" integer NOT NULL, "url_id" integer NOT NULL)[0m
  â†³ db/migrate/20190621030005_create_taggings.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190621030005"]]
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTaggings (20190621030005)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (12.8ms)[0m  [1m[35mDROP TABLE "taggings"[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::SchemaMigration Destroy (2.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20190621030005"]]
  â†³ bin/rails:9
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateTaggings (20190621030005)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "taggings" ("id" bigserial primary key, "tag_id" integer NOT NULL, "url_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190621030005_create_taggings.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190621030005"]]
  â†³ bin/rails:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mTagTopic Load (2.2ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagTopic Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "tag_topics" WHERE "tag_topics"."tag" = $1 LIMIT $2[0m  [["tag", "search"], ["LIMIT", 1]]
  [1m[36mTagTopic Create (1.2ms)[0m  [1m[32mINSERT INTO "tag_topics" ("tag", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["tag", "search"], ["created_at", "2019-06-21 04:43:28.276704"], ["updated_at", "2019-06-21 04:43:28.276704"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTagging Create (1.2ms)[0m  [1m[32mINSERT INTO "taggings" ("tag_id", "url_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["tag_id", 1], ["url_id", 1], ["created_at", "2019-06-21 04:44:17.070918"], ["updated_at", "2019-06-21 04:44:17.070918"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagging Load (0.3ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagging Load (0.4ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.7ms)[0m  [1m[34mSELECT "tag_topics".* FROM "tag_topics" INNER JOIN "taggings" ON "tag_topics"."id" = "taggings"."tag_id" WHERE "taggings"."url_id" = $1[0m  [["url_id", 1]]
  [1m[36mTagTopic Load (0.3ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagging Load (0.4ms)[0m  [1m[34mSELECT "taggings".* FROM "taggings" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (7.2ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (1.6ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (2.3ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (2.8ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (3.5ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mVisit Load (1.0ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (10.1ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) as number_of_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."short_url", "shortened_urls"."long_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (2.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mVisit Load (0.5ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (0.4ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" ORDER BY "shortened_urls"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT("shortened_urls"."long_url") AS count_long_url, "shortened_urls"."long_url" AS shortened_urls_long_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url"[0m  [["tag_id", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT("shortened_urls"."long_url") AS count_long_url, "shortened_urls"."long_url" AS shortened_urls_long_url, "shortened_urls"."short_url" AS shortened_urls_short_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, "shortened_urls"."long_url" AS shortened_urls_long_url, "shortened_urls"."short_url" AS shortened_urls_short_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):16)
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):17)
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls"."long_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):18)
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):19)
  [1m[36mShortenedUrl Load (1.5ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url", COUNT(long:url) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  "shortened_urls"."long_url", "shortened_urls"."short_url", COUNT(long:url) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):20)
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
  [1m[36mTagTopic Load (0.7ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):2)
  [1m[36mShortenedUrl Load (2.2ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url", COUNT(visits.id) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):3)
  [1m[36mShortenedUrl Load (1.9ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url", COUNT(visits.id) AS num_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (0.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (0.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(id) Desc". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):6)
  [1m[36mShortenedUrl Load (1.8ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(id) Desc[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (2.0ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(id) Desc LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id) DESC". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):7)
  [1m[36mShortenedUrl Load (2.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.5ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY COUNT(visits.id) DESC LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 ORDER BY "shortened_urls"."id" ASC[0m  [["tag_id", 1]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, "shortened_urls"."long_url" AS shortened_urls_long_url, "shortened_urls"."short_url" AS shortened_urls_short_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, "shortened_urls"."long_url" AS shortened_urls_long_url, "shortened_urls"."short_url" AS shortened_urls_short_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY "shortened_urls"."id" ASC[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (2.9ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY shortened_url.id[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY shortened_url.id LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(shortened_url.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):16)
  [1m[36mShortenedUrl Load (1.5ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(shortened_url.id)[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT  "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(shortened_url.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(shortened_url.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):17)
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(shortened_url.id)[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(shortened_url.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(shortened_url.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):18)
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT  "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(shortened_url.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mShortenedUrl Load (1.7ms)[0m  [1m[34mSELECT  "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(shortened_url.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):19)
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT  "shortened_urls"."long_url", "shortened_urls"."short_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):20)
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT  COUNT(visits.id) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):21)
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT  COUNT(visits.id) AS num FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):22)
  [1m[36mShortenedUrl Load (1.3ms)[0m  [1m[34mSELECT  COUNT(*) AS num FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (3.8ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTagTopic Load (0.6ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (12.2ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, "shortened_urls"."long_url" AS shortened_urls_long_url, "shortened_urls"."short_url" AS shortened_urls_short_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, "shortened_urls"."long_url" AS shortened_urls_long_url, "shortened_urls"."short_url" AS shortened_urls_short_url FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.6ms)[0m  [1m[34mSELECT COUNT(* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.1ms)[0m  [1m[34mSELECT  COUNT(* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.8ms)[0m  [1m[34mSELECT COUNT(visits.id) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls"."long_url" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (4.1ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url", "count" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT  "shortened_urls"."long_url", "shortened_urls"."short_url", "count" FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 11]]
  [1m[36mShortenedUrl Load (1.4ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url", COUNT(short_url) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.2ms)[0m  [1m[34mSELECT "shortened_urls"."long_url", "shortened_urls"."short_url", COUNT(short_url) AS num FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url"[0m  [["tag_id", 1]]
  [1m[36mShortenedUrl Load (1.0ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."id"[0m  [["tag_id", 1]]
  [1m[36mVisit Load (0.6ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mVisit Load (2.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits" GROUP BY "visits"."url_id"[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, "visits"."url_id" AS visits_url_id FROM "visits" GROUP BY "visits"."url_id"[0m
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):26)
  [1m[36mVisit Load (3.0ms)[0m  [1m[34mSELECT "visits".* FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id)[0m
  [1m[36mVisit Load (1.4ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 11]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):27)
  [1m[36mVisit Load (1.8ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mVisit Load (1.7ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):28)
  [1m[36mVisit Load (1.9ms)[0m  [1m[34mSELECT  "visits"."url_id" FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):29)
  [1m[36mVisit Load (1.0ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):30)
  [1m[35m (3.6ms)[0m  [1m[34mSELECT  COUNT(url_id, COUNT(url_id)) AS count_url_id_count_url_id, "visits"."url_id" AS visits_url_id FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):31)
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):32)
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):33)
  [1m[36mVisit Load (0.9ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):34)
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):35)
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):36)
  [1m[36mVisit Load (0.8ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):37)
  [1m[36mVisit Load (1.0ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):38)
  [1m[36mVisit Load (1.1ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mVisit Load (1.1ms)[0m  [1m[34mSELECT  "visits".* FROM "visits" ORDER BY "visits"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mVisit Load (0.6ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(url_id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from __pry__ at (pry):44)
  [1m[36mVisit Load (0.6ms)[0m  [1m[34mSELECT  url_id, COUNT(url_id) AS num FROM "visits" GROUP BY "visits"."url_id" ORDER BY COUNT(url_id) LIMIT $1[0m  [["LIMIT", 5]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (6.9ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (4.2ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) AS num_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 5]]
  [1m[36mTagTopic Load (0.5ms)[0m  [1m[34mSELECT  "tag_topics".* FROM "tag_topics" ORDER BY "tag_topics"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Dangerous query method (method whose arguments are used as raw SQL) called with non-attribute argument(s): "COUNT(visits.id)". Non-attribute arguments will be disallowed in Rails 6.0. This method should not be called with user-provided values, such as request parameters or model attributes. Known-safe values can be passed by wrapping them in Arel.sql(). (called from popular_links at /Users/bryanwu/Desktop/AppAcademy/SQL/URLShortener/app/models/tag_topic.rb:16)
  [1m[36mShortenedUrl Load (5.9ms)[0m  [1m[34mSELECT  long_url, short_url, COUNT(visits.id) AS num_visits FROM "shortened_urls" INNER JOIN "visits" ON "visits"."url_id" = "shortened_urls"."id" INNER JOIN "taggings" ON "shortened_urls"."id" = "taggings"."url_id" WHERE "taggings"."tag_id" = $1 GROUP BY "shortened_urls"."long_url", "shortened_urls"."short_url" ORDER BY COUNT(visits.id) LIMIT $2[0m  [["tag_id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mShortenedUrl Load (0.6ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mUser Exists (2.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mUser Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[35m (6.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to AddPremiumToUsers (20190621063350)
  [1m[35m (7.5ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (48.7ms)[0m  [1m[35mALTER TABLE "users" ADD "premium" boolean DEFAULT FALSE[0m
  â†³ db/migrate/20190621063350_add_premium_to_users.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (2.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190621063350"]]
  â†³ bin/rails:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (2.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4762635147840476445)[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bowen-wu@hotmail.com"], ["LIMIT", 1]]
  â†³ bin/cli:5
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  â†³ bin/cli:6
  [1m[36mShortenedUrl Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "Vniwto5w3fCiIRL4Sw8BKw"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:42
  [1m[36mShortenedUrl Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "GgUZrUr8k7M8FUXOk3QGmA"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:42
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/shortened_url.rb:10
  [1m[36mShortenedUrl Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."short_url" = $1 LIMIT $2[0m  [["short_url", "GgUZrUr8k7M8FUXOk3QGmA"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:10
  [1m[36mShortenedUrl Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "shortened_urls" WHERE "shortened_urls"."long_url" = $1 LIMIT $2[0m  [["long_url", "www.yahoo.com"], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:10
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:27
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:28
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "shortened_urls" WHERE "shortened_urls"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/shortened_url.rb:28
  [1m[36mShortenedUrl Load (7.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" WHERE (created_at >= '2019-06-21 06:34:25.869696') AND "shortened_urls"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/models/shortened_url.rb:35
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/shortened_url.rb:10
  [1m[36mShortenedUrl Create (2.3ms)[0m  [1m[32mINSERT INTO "shortened_urls" ("long_url", "short_url", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["long_url", "www.yahoo.com"], ["short_url", "GgUZrUr8k7M8FUXOk3QGmA"], ["user_id", 1], ["created_at", "2019-06-21 06:35:25.883775"], ["updated_at", "2019-06-21 06:35:25.883775"]]
  â†³ app/models/shortened_url.rb:10
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/shortened_url.rb:10
  [1m[36mShortenedUrl Load (11.1ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls" INNER JOIN "users" ON "users"."id" = "shortened_urls"."user_id" LEFT JOIN visits ON visits.url_id = shortened_urls.id WHERE ((shortened_urls.id IN
                            (
                                SELECT 
                                    shortened_urls.id
                                FROM 
                                    shortened_urls
                                JOIN
                                    visits ON shortened_urls.id = visits.url_id
                                GROUP BY 
                                    shortened_urls.id
                                HAVING
                                    MAX(visits.created_at) < '2019-06-21 05:54:04 UTC'
                            ))
                            OR 
                            (
                                (visits.id) IS NULL AND (shortened_urls.created_at < '2019-06-21 05:54:04 UTC')
                            )
                            AND
                            (users.premium = FALSE)
                            )[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (2.8ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.4ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mShortenedUrl Destroy (0.3ms)[0m  [1m[31mDELETE FROM "shortened_urls" WHERE "shortened_urls"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mShortenedUrl Load (0.7ms)[0m  [1m[34mSELECT "shortened_urls".* FROM "shortened_urls"[0m
  [1m[36mVisit Load (0.4ms)[0m  [1m[34mSELECT "visits".* FROM "visits"[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
